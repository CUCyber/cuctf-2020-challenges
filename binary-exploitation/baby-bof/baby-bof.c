#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <stdlib.h>

void timeout(int sig) {
    if (sig == SIGALRM) {
        printf("Connection timedout\n");
        exit(0);
    }
}

void setup() {
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stdin, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);
    signal(SIGALRM, timeout);
    alarm(30);
}

int main(void) {
    setup();
    char buf[32];

    printf("Here's a little challenge to get you warmed up.\n");
    gets(buf);
    return 0;
}

void get_flag() {
    char flag[32];
    int len = 0;
    FILE* fp = fopen("flag.txt", "r");
    len = fread(flag, 1, 32, fp);
    flag[len] = 0;
    printf("%s\n", flag);
}
